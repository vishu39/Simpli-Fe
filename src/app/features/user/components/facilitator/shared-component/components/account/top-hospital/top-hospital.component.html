<section class="content">
    <div class="content-block">
        <div class="block-header">
            <app-breadcrumb [title]="'Account'" [active_item]="'Top Hospital'"></app-breadcrumb>
        </div>
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                    <mat-spinner *ngIf="isLoading" class="mx-auto mb-2 mt-2"
                    [diameter]="30">
                </mat-spinner>
                    <div class="body" *ngIf="!isLoading">
                        <form class="m-4" [formGroup]="topHospitalForm" (ngSubmit)="formSubmit()">
                            <div class="row">
                                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                                    <div class="multiple_select_custom">
                                    <mat-form-field class="example-full-width">
                                        <mat-label>Hospital</mat-label>
                                        <mat-select multiple formControlName="hospital"
                                            msInfiniteScroll (infiniteScroll)="onInfiniteScrollHospital()" [compareWith]="compareObjects">
                                            <input class="searchInput" placeholder="search..." (keydown.space)="$event.stopPropagation()" matInput
                                                (keyup)="searchHospital($event.target.value)">
                                            <div class="other_option"
                                                *ngIf="!hospitalData?.length && !isLoadingHospital">
                                                No results
                                            </div>

                                            <div class="other_option" *ngIf="hospitalData?.length">
                                                <mat-checkbox (change)="selectAllHospital($event)">Select All
                                                </mat-checkbox>
                                            </div>

                                            <mat-spinner *ngIf="isLoadingHospitalSelectAll" class="mx-auto mb-2 mt-2"
                                                [diameter]="30">
                                            </mat-spinner>


                                            <ng-container *ngIf="!isLoadingHospitalSelectAll">
                                                <mat-option (click)="onClickHospital({
                                                    _id:item._id,
                                                    name:item.name
                                                })" *ngFor="let item of hospitalData" [value]="{
                                                        _id:item._id,
                                                        name:item.name
                                                    }"> {{item.name}}
                                                </mat-option>
                                            </ng-container>

                                            <mat-spinner *ngIf="isLoadingHospital && !isLoadingHospitalSelectAll"
                                                class="mx-auto mb-2 mt-2" [diameter]="30">
                                            </mat-spinner>

                                        </mat-select>
                                        <div class="chip_section" [perfectScrollbar]>
                                            <mat-chip-list>
                                                <mat-chip *ngFor="let item of topHospitalForm.get('hospital').value">
                                                    {{item.name}}
                                                </mat-chip>
                                            </mat-chip-list>
                                        </div>
                                        <mat-error *ngIf="topHospitalForm.controls['hospital'].hasError('required')">
                                            Hospital is required
                                        </mat-error>
                                    </mat-form-field>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                                    <button class="btn-space" mat-raised-button color="primary">
                                        Submit
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>